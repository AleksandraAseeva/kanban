"use strict";(self["webpackChunkvue_proj"]=self["webpackChunkvue_proj"]||[]).push([[587],{587:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var a=s(641),o=s(751),r=s(33);const i={key:0,class:"edit-task-container"},u={key:0,class:"error"},n={key:1,class:"error"},l={class:"input-group"},d={key:1};function k(t,e,s,k,p,c){return p.task?((0,a.uX)(),(0,a.CE)("div",i,[e[9]||(e[9]=(0,a.Lk)("h2",{class:"form-title"},"Редактировать задачу",-1)),(0,a.Lk)("form",{onSubmit:e[6]||(e[6]=(0,o.D$)(((...t)=>c.saveTask&&c.saveTask(...t)),["prevent"])),class:"edit-task-form"},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.task.title=t),placeholder:"Заголовок"},null,512),[[o.Jo,p.task.title]]),p.errors.title?((0,a.uX)(),(0,a.CE)("span",u,(0,r.v_)(p.errors.title),1)):(0,a.Q3)("",!0),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>p.task.description=t),placeholder:"Описание"},null,512),[[o.Jo,p.task.description]]),p.errors.description?((0,a.uX)(),(0,a.CE)("span",n,(0,r.v_)(p.errors.description),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",l,[(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>p.task.amount=t),min:"1",max:"30",required:"",placeholder:"Число (1-30)",class:"form-input"},null,512),[[o.Jo,p.task.amount,void 0,{number:!0}]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>p.task.unit=t),required:"",class:"form-select form-select-days"},e[7]||(e[7]=[(0,a.Fv)('<option value="minutes" data-v-6c515737>Минуты</option><option value="hours" data-v-6c515737>Часы</option><option value="days" data-v-6c515737>Дни</option><option value="months" data-v-6c515737>Месяцы</option><option value="years" data-v-6c515737>Годы</option>',5)]),512),[[o.u1,p.task.unit]])]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>p.task.priority=t),required:"",class:"form-select"},e[8]||(e[8]=[(0,a.Lk)("option",{value:"low"},"Низкий",-1),(0,a.Lk)("option",{value:"medium"},"Средний",-1),(0,a.Lk)("option",{value:"high"},"Высокий",-1)]),512),[[o.u1,p.task.priority]]),(0,a.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>c.saveTask&&c.saveTask(...t)),class:"submit-button"},"Сохранить")],32)])):((0,a.uX)(),(0,a.CE)("div",d,e[10]||(e[10]=[(0,a.Lk)("p",null,"Задача не найдена.",-1)])))}var p=s(278),c={computed:{...(0,p.L8)("tasks",["getTaskById"])},data(){return{task:{title:"",description:"",priority:"medium",amount:"1",unit:"hours",duration:0,status:"start"},errors:{}}},created(){const t=this.$route.query.id;this.task=this.$store.getters["tasks/getTaskById"](t),this.task?this.updateDuration():(console.error("Task not found"),this.$router.push("/addtask"))},methods:{...(0,p.i0)("tasks",["updateTask"]),computeDuration(t,e){switch(e){case"minutes":return 60*t*1e3;case"hours":return 60*t*60*1e3;case"days":return 24*t*60*60*1e3;case"months":return 30*t*24*60*60*1e3;case"years":return 365*t*24*60*60*1e3;default:return 0}},updateDuration(){this.task.duration=this.computeDuration(this.task.amount,this.task.unit)},saveTask(){this.errors={},this.task.title.length<5&&(this.errors.title="Минимальная длина заголовка 5 символов."),this.task.description.length<5&&(this.errors.description="Минимальная длина описания 5 символов."),Object.keys(this.errors).length>0||(this.updateDuration(),this.updateTask(this.task),this.$router.push("/kanbantasks"))}}},h=s(262);const m=(0,h.A)(c,[["render",k],["__scopeId","data-v-6c515737"]]);var v=m}}]);
//# sourceMappingURL=587.6fda5011.js.map